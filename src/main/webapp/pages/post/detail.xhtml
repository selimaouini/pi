<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Consommi Tounsi</title>
		<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
			rel="stylesheet" />
	</h:head>
	<h:body>
		<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
			template="/template/template.xhtml">
			<ui:param name="page_name" value="Consomi tounsi" />
			<ui:define name="menu">

				
				   <p:linkButton outcome="-pages/post/detail" value="Retour" style="margin-right:20px;"> </p:linkButton>
  <p:dataTable id="table" var="post" value="#{post.post}">

				

				<div class="rounded bg-white-400 shadow-lg inline-block p-8 m-8">
					<center>
						<h1 class="text-center text-blue-800">Post Detail</h1>
					</center>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Title</span> <span class="font-light">#{post.title}</span>
					</div>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Content</span> <span
							class="font-light">#{post.content}</span>
					</div>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Photo</span> <span class="font-light">#{post.photo}</span>
					</div>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Theme</span> <span class="font-light">#{post.theme}</span>
					</div>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Rating</span> <span class="font-light">#{rating.stars}</span>
					</div>
					<div class="flex flex-col p-4">
						<span class="text-blue-400">Writer</span> <span class="font-light">#{user.firstName}</span>
					</div>

					<h:commandButton icon="pi pi-user-edit" class="p-mr-2" action="#{postController.updatePost(post,post.title,post.content,post.photo,post.theme)}"
						value="Modifier" />
						styleClass="rounded-button ui-button-danger" 
				
					<h:commandButton icon="pi pi-trash"  class="p-button-danger"  action="#{postController.delete(post.idP)}" value="Supprimer" />
				
				</div>

				<div>
					<h4>Rating</h4>
					<h:form method="post" commandName="rating"
						action="#{postController.addRating()}">
						<table border="1">
							<tr>
								<td><div id="rating"></div> <input type="hidden" id="hi"
									name="rating"></input></td>
								<p:rating readonly="true" value="#{post.rating}" />
							</tr>
						</table>
					</h:form>

				</div>

				<div>
					<h:form id="form">
						<h4>Comments</h4>
						<h:panelGroup columns="2">
							<h:form>

								<h:dataTable value="#{commentController.comments}" var="comment" border="1">
									<h:column>
										<f:facet name="header">
											<h:outputText value="Description" />
										</f:facet>
										<h:outputText value="#{comment.description}" />
									</h:column>

									<h:column>
										<f:facet name="header">
											<h:outputText value="Date Creation" />
										</f:facet>
										<h:outputText value="#{comment.dateCreation}" />
									</h:column>

									<h:column>
										<f:facet name="header">
											<h:outputText value="Action" />
										</f:facet>
										<h:commandButton
											action="#{commentController.updateComment(comment)}"
											value="Modifier" icon="pi pi-fw pi-pencil" />
										<h:commandButton
											action="#{commentController.removeComment(comment.idc)}"
											value="Supprimer" />
									</h:column>

									<h:column>
										<f:facet name="header">
											<h:outputText value="React" />
										</f:facet>								
										<h:commandButton  icon="pi pi-thumbs-up"  styleClass="rounded-button ui-button-outlined" action="#{commentController.like()}"/>			
										<h:commandButton  icon="pi pi-thumbs-down"  styleClass="rounded-button ui-button-outlined" action="#{commentController.dislike()}"/>																																							
									</h:column>

								</h:dataTable>
							</h:form>
						</h:panelGroup>

						<table>
							<tr>
								<td><h:outputText value="comment"></h:outputText></td>
								<td><h:inputText value="#{commentController.description}"></h:inputText></td>

								<td colspan="2"><h:commandButton value="Envoyer" action="#{commentController.addComment()}" /></td>
							</tr>
						</table>
					</h:form>
				</div></p:dataTable>
			</ui:define>
		</ui:composition>
	</h:body>
</f:view>
</html>